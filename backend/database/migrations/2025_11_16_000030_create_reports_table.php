<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; class CreateReportsTable extends Migration { public function up() { Schema::create('reports', function (Blueprint $table) { $table->char('id',36)->primary(); $table->string('title'); $table->unsignedInteger('type_id')->nullable(); $table->unsignedBigInteger('created_by')->nullable(); $table->json('filters')->nullable(); $table->enum('visualization_type', ['chart','table','kpi','map','pivot'])->default('table'); $table->string('data_source')->nullable(); $table->json('settings')->nullable(); $table->enum('status', ['draft','generated','archived'])->default('draft'); $table->timestamp('generated_at')->nullable(); $table->boolean('is_public')->default(false); $table->json('shared_with')->nullable(); $table->timestamps(); $table->foreign('type_id')->references('id')->on('report_types')->onDelete('set null'); $table->foreign('created_by')->references('id')->on('users')->onDelete('set null'); $table->index(['data_source','status']); }); } public function down() { Schema::dropIfExists('reports'); } }
