<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; class CreateEvaluationsTable extends Migration { public function up() { Schema::create('evaluations', function (Blueprint $table) { $table->char('id',36)->primary(); $table->string('entity_type'); $table->string('entity_id'); $table->unsignedInteger('template_id'); $table->json('result')->nullable(); $table->unsignedBigInteger('scored_by')->nullable(); $table->timestamps(); $table->foreign('template_id')->references('id')->on('evaluation_templates')->onDelete('cascade'); $table->foreign('scored_by')->references('id')->on('users')->onDelete('set null'); $table->index(['entity_type','entity_id']); }); } public function down() { Schema::dropIfExists('evaluations'); } }
