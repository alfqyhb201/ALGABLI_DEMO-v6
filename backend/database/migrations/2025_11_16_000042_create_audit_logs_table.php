<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; class CreateAuditLogsTable extends Migration { public function up() { Schema::create('audit_logs', function (Blueprint $table) { $table->bigIncrements('id'); $table->unsignedBigInteger('actor_id')->nullable(); $table->string('action'); $table->string('resource_type')->nullable(); $table->string('resource_id')->nullable(); $table->json('meta')->nullable(); $table->timestamp('created_at')->useCurrent(); $table->foreign('actor_id')->references('id')->on('users')->onDelete('set null'); $table->index(['actor_id','resource_type']); }); } public function down() { Schema::dropIfExists('audit_logs'); } }
