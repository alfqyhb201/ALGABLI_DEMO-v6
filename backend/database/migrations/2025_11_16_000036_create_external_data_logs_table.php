<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; class CreateExternalDataLogsTable extends Migration { public function up() { Schema::create('external_data_logs', function (Blueprint $table) { $table->char('id',36)->primary(); $table->char('integration_id',36); $table->char('report_id',36)->nullable(); $table->text('query_executed')->nullable(); $table->enum('status', ['success','failed'])->default('success'); $table->integer('response_time_ms')->nullable(); $table->integer('row_count')->nullable(); $table->text('error_message')->nullable(); $table->timestamps(); $table->foreign('integration_id')->references('id')->on('data_integrations')->onDelete('cascade'); $table->foreign('report_id')->references('id')->on('reports')->onDelete('set null'); }); } public function down() { Schema::dropIfExists('external_data_logs'); } }
