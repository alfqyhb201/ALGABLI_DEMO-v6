<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; class CreateSyncDevicesTable extends Migration { public function up() { Schema::create('sync_devices', function (Blueprint $table) { $table->increments('id'); $table->unsignedBigInteger('user_id')->nullable(); $table->string('device_uuid')->unique(); $table->string('device_name')->nullable(); $table->enum('platform', ['android','ios','desktop','web'])->nullable(); $table->string('app_version')->nullable(); $table->string('last_ip_address', 45)->nullable(); $table->timestamp('last_sync_at')->nullable(); $table->boolean('is_active')->default(true); $table->timestamps(); $table->foreign('user_id')->references('id')->on('users')->onDelete('set null'); $table->index(['user_id','device_uuid']); }); } public function down() { Schema::dropIfExists('sync_devices'); } }
