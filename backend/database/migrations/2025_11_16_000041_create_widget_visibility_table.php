<?php use Illuminate\Database\Migrations\Migration; use Illuminate\Database\Schema\Blueprint; use Illuminate\Support\Facades\Schema; class CreateWidgetVisibilityTable extends Migration { public function up() { Schema::create('widget_visibility', function (Blueprint $table) { $table->bigIncrements('id'); $table->unsignedInteger('widget_id'); $table->string('scope_type'); $table->string('scope_id')->nullable(); $table->boolean('can_view')->default(true); $table->boolean('can_action')->default(false); $table->timestamp('valid_from')->nullable(); $table->timestamp('valid_until')->nullable(); $table->timestamps(); $table->foreign('widget_id')->references('id')->on('widgets')->onDelete('cascade'); }); } public function down() { Schema::dropIfExists('widget_visibility'); } }
